!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).compromiseSyllables=t()}(this,(function(){"use strict";var e=/^(eu)/i,t=/^[^aeiou][e]([^d]|$)/,n=/^([^aeiouy])[aeiouy]\1[aeiouy]/,a=/^[^aeiouy]([aeiouy])[^aeiouy]\1/,i=/^([tg][aeiouy]){2}/,o=/^[^aeiouy]+$/,u=/[aeiouy]$/,h=/^[^aeiouy][h]?[aeiouy]/,l=[/^[^aeiou]?ion/,/^[^aeiou]?ised/,/^[^aeiou]?iled/,/[aeiou][n][gt]$/,/\wa[gt]e$/],r=function(r){var c=(r=(r=r.map((function(e){return e.trim()}))).filter((function(e){return""!==e}))).length;if(c>1)for(var f=r[c-2]+r[c-1],m=0;m<l.length;m++)f.match(l[m])&&(r[c-2]=r[c-2]+r[c-1],r.pop());if(r.length>1){var g=(1===r[0].length||r[0].match(h))&&r[0].match(u),s=r[1].match(t);if(g&&s){var p=r[0]+r[1];p.match(n)||p.match(a)||p.match(i)||(r[0]=r[0]+r[1],r.splice(1,1))}}if(r.length>1){var y=r[r.length-2].match(h)&&r[r.length-2].match(u),v=r[r.length-1].match(t)&&l.every((function(e){return!r[r.length-1].match(e)}));if(y&&v){var d=r[r.length-2]+r[r.length-1];d.match(n)||d.match(a)||d.match(i)||(r[r.length-2]=r[r.length-2]+r[r.length-1],r.splice(r.length-1,1))}}if(r.length>1){var b=r[0]+r[1];b.match(e)&&(r[0]=b,r.splice(1,1))}return r.length>1&&r[r.length-1].match(o)&&(r[r.length-2]=r[r.length-2]+r[r.length-1],r.splice(r.length-1,1)),r},c=/ +/g,f=/[aeiouy]$/,m=/^[^aeiouy][h]?[aeiouy]/,g=/^e[sm]/,s=/^e/,p=/(eo|eu|ia|oa|ua|ui)$/i,y=/[aiouy]/,v=/ee$/,d=function e(t){for(var n=[],a=t.split(""),i="",o="",u="",h=0;h<a.length;h++){i=a.slice(0,h).join(""),u=a[h],o=a.slice(h+1,a.length).join("");var l=i+a[h];if(i.match(f)&&!u.match(f))return o.match(g)&&(l+="e",o=o.replace(s,"")),n.push(l),n.concat(e(o));if(l.match(p))return n.push(i),n.push(u),n.concat(e(o));if(l.match(f)&&o.match(m))return n.push(l),n.concat(e(o))}if(t.match(y)||t.match(v))n.push(t);else if(t){var r=n.length-1;r<0&&(r=0),n[r]=(n[r]||"")+t}return n},b=function(e){var t=[];return e?((e=e.replace(/[.,?]/g,"")).split(c).map((function(e){t=t.concat(d(e))})),0===(t=r(t)).length&&(t=[e]),t=t.filter((function(e){return e}))):t},$={normal:!0,text:!0,terms:!1};return function(e){return e.prototype.syllables=function(e){var t=null;"number"==typeof e&&(t=e,e={});var n=this.json(e||$);return n=n.map((function(e){return e.syllables=b(e.normal||e.text),e})),"number"==typeof t&&(n=n[t]),n},e}}));
