{"version":3,"file":"markdown.js","sources":["../../../src/prism/languages/markdown.js"],"sourcesContent":["import { languages, tokenizeText, tokenize, withoutTokenizer } from '../core.js';\nimport { clone, insertBefore } from '../utils/language.js';\nimport { re, replace } from '../utils/shared.js';\nimport './markup.js';\n\n// Allow only one line break\nvar inner = [/(?:\\\\.|[^\\\\\\n]|\\n(?!\\n))/.source];\n\n/**\n * This function is intended for the creation of the bold or italic pattern.\n *\n * This also adds a lookbehind group to the given pattern to ensure that the pattern is not backslash-escaped.\n *\n * _Note:_ Keep in mind that this adds a capturing group.\n *\n * @param {string} pattern\n * @returns {RegExp}\n */\nvar createInline = pattern => re(`((?:^|[^\\\\\\\\])(?:\\\\\\\\\\\\\\\\)*)(?:${pattern})`, inner, 'g');\nvar tableCell = /(?:\\\\.|``(?:[^\\n`]|`(?!`))+``|`[^\\n`]+`|[^\\\\\\n|`])+/;\nvar tableRow = replace(/\\|?<0>(?:\\|<0>)+\\|?(?:\\n|(?![\\s\\S]))/.source, [tableCell.source]);\nvar tableLine = /\\|?[ \\t]*:?-{3,}:?[ \\t]*(?:\\|[ \\t]*:?-{3,}:?[ \\t]*)+\\|?\\n/.source;\nvar markdown = languages.md = languages.markdown = clone(languages.html);\n\ninsertBefore(markdown, 'prolog', {\n\t'front-matter-block': {\n\t\tpattern: /(^(?:\\s*\\n)?)---(?!.)[\\s\\S]*?\\n---(?!.)/g,\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'punctuation': /^---|---$/,\n\t\t\t'front-matter': {\n\t\t\t\tpattern: /\\S(?:[\\s\\S]*\\S)?/,\n\t\t\t\talias: 'language-yaml',\n\t\t\t\tinside: 'yaml'\n\t\t\t}\n\t\t}\n\t},\n\t'blockquote': {\n\t\t// > ...\n\t\tpattern: /^>(?:[ \\t]*>)*/m,\n\t\talias: 'punctuation'\n\t},\n\t'table': {\n\t\tpattern: RegExp('^' + tableRow + tableLine + '(?:' + tableRow + ')*', 'm'),\n\t\tinside: {\n\t\t\t'table-header-row': {\n\t\t\t\tpattern: /^.+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'table-header': {\n\t\t\t\t\t\tpattern: tableCell,\n\t\t\t\t\t\talias: 'important',\n\t\t\t\t\t\tinside: markdown\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /\\|/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'table-data-rows': {\n\t\t\t\tpattern: /(.+\\n)[\\s\\S]+/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'table-data': {\n\t\t\t\t\t\tpattern: tableCell,\n\t\t\t\t\t\tinside: markdown\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /\\|/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'table-line': {\n\t\t\t\tpattern: /.+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /\\S+/\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t},\n\t'code': [\n\t\t{\n\t\t\t// Prefixed by 4 spaces or 1 tab and preceded by an empty line\n\t\t\tpattern: /(^[ \\t]*\\n)(?:    |\\t).+(?:\\n(?:    |\\t).+)*/m,\n\t\t\tlookbehind: true,\n\t\t\talias: 'keyword'\n\t\t},\n\t\t{\n\t\t\t// ```optional language\n\t\t\t// code block\n\t\t\t// ```\n\t\t\tpattern: /^(```+)[^`][\\s\\S]*?^\\1`*$/mg,\n\t\t\tgreedy: true,\n\t\t\tinside: {\n\t\t\t\t'punctuation': /^`+|`+$/,\n\t\t\t\t'code-language': /^.+/,\n\t\t\t\t'code-block': /(?!^)[\\s\\S]+(?=\\n)/,\n\t\t\t\t[tokenize](code, grammar) {\n\t\t\t\t\tvar tokens = withoutTokenizer(code, grammar);\n\t\t\t\t\tvar language;\n\n\t\t\t\t\tif (tokens[5]) {\n\t\t\t\t\t\tlanguage = (/[a-z][\\w-]*/i.exec(\n\t\t\t\t\t\t\ttokens[1].content.replace(/\\b#/g, 'sharp').replace(/\\b\\+\\+/g, 'pp')\n\t\t\t\t\t\t) || [''])[0].toLowerCase();\n\n\t\t\t\t\t\ttokens[3].alias = 'language-' + language;\n\t\n\t\t\t\t\t\tif (grammar = languages[language]) {\n\t\t\t\t\t\t\ttokens[3].content = tokenizeText(tokens[3].content, grammar);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn tokens;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t],\n\t'title': [\n\t\t{\n\t\t\t// title 1\n\t\t\t// =======\n\n\t\t\t// title 2\n\t\t\t// -------\n\t\t\tpattern: /\\S.*\\n(?:==+|--+)(?=[ \\t]*$)/m,\n\t\t\talias: 'important',\n\t\t\tinside: {\n\t\t\t\tpunctuation: /=+$|-+$/\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t// # title 1\n\t\t\t// ###### title 6\n\t\t\tpattern: /(^\\s*)#.+/m,\n\t\t\tlookbehind: true,\n\t\t\talias: 'important',\n\t\t\tinside: {\n\t\t\t\tpunctuation: /^#+|#+$/\n\t\t\t}\n\t\t}\n\t],\n\t'hr': {\n\t\t// ***\n\t\t// ---\n\t\t// * * *\n\t\t// -----------\n\t\tpattern: /(^\\s*)([*-])(?:[ \\t]*\\2){2,}(?=\\s*$)/m,\n\t\tlookbehind: true,\n\t\talias: 'punctuation'\n\t},\n\t'list': {\n\t\t// * item\n\t\t// + item\n\t\t// - item\n\t\t// 1. item\n\t\tpattern: /(^\\s*)(?:[*+-]|\\d+\\.)(?=[ \\t].)/m,\n\t\tlookbehind: true,\n\t\talias: 'punctuation'\n\t},\n\t'url-reference': {\n\t\t// [id]: http://example.com \"Optional title\"\n\t\t// [id]: http://example.com 'Optional title'\n\t\t// [id]: http://example.com (Optional title)\n\t\t// [id]: <http://example.com> \"Optional title\"\n\t\tpattern: /!?\\[[^\\]]+\\]:[ \\t]+(?:\\S+|<(?:\\\\.|[^>\\\\])+>)(?:[ \\t]+(?:\"(?:\\\\.|[^\\\\\"])*\"|'(?:\\\\.|[^\\\\'])*'|\\((?:\\\\.|[^)\\\\])*\\)))?/,\n\t\tinside: {\n\t\t\t'variable': {\n\t\t\t\tpattern: /^(!?\\[)[^\\]]+/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'string': /(?:\"(?:\\\\.|[^\\\\\"])*\"|'(?:\\\\.|[^\\\\'])*'|\\((?:\\\\.|[^)\\\\])*\\))$/,\n\t\t\t'punctuation': /^[[\\]!:]|<|>/\n\t\t},\n\t\talias: 'url'\n\t},\n\t'bold': {\n\t\t// **strong**\n\t\t// __strong__\n\n\t\t// allow one nested instance of italic text using the same delimiter\n\t\tpattern: createInline(/\\b__(?:(?!_)<0>|_(?:(?!_)<0>)+_)+__\\b|\\*\\*(?:(?!\\*)<0>|\\*(?:(?!\\*)<0>)+\\*)+\\*\\*/.source),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'content': {\n\t\t\t\tpattern: /(^..)[\\s\\S]+(?=..)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {} // see below\n\t\t\t},\n\t\t\t'punctuation': /../\n\t\t}\n\t},\n\t'italic': {\n\t\t// *em*\n\t\t// _em_\n\n\t\t// allow one nested instance of bold text using the same delimiter\n\t\tpattern: createInline(/\\b_(?:(?!_)<0>|__(?:(?!_)<0>)+__)+_\\b|\\*(?:(?!\\*)<0>|\\*\\*(?:(?!\\*)<0>)+\\*\\*)+\\*/.source),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'content': {\n\t\t\t\tpattern: /(?!^)[\\s\\S]+(?=.)/,\n\t\t\t\tinside: {} // see below\n\t\t\t},\n\t\t\t'punctuation': /./\n\t\t}\n\t},\n\t'strike': {\n\t\t// ~~strike through~~\n\t\t// ~strike~\n\t\t// eslint-disable-next-line regexp/strict\n\t\tpattern: createInline(/(~~?)(?:(?!~)<0>)+\\2/.source),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'punctuation': /^~~?|~~?$/,\n\t\t\t'content': {\n\t\t\t\tpattern: /[\\s\\S]+/,\n\t\t\t\tinside: {} // see below\n\t\t\t},\n\t\t}\n\t},\n\t'code-snippet': {\n\t\t// `code`\n\t\t// ``code``\n\t\tpattern: /(^|[^\\\\`])(?:``[^\\n`]+(?:`[^\\n`]+)*``(?!`)|`[^\\n`]+`(?!`))/g,\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\talias: 'code keyword'\n\t},\n\t'url': {\n\t\t// [example](http://example.com \"Optional title\")\n\t\t// [example][id]\n\t\t// [example] [id]\n\t\tpattern: createInline(/!?\\[(?:(?!\\])<0>)+\\](?:\\([^\\s)]+(?:[ \\t]+\"(?:\\\\.|[^\\\\\"])*\")?\\)|[ \\t]?\\[(?:(?!\\])<0>)+\\])/.source),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'operator': /^!/,\n\t\t\t'content': {\n\t\t\t\tpattern: /(^\\[)[^\\]]+(?=\\])/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {} // see below\n\t\t\t},\n\t\t\t'variable': {\n\t\t\t\tpattern: /(^\\][ \\t]?\\[)[^\\]]+(?=\\]$)/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'url': {\n\t\t\t\tpattern: /(^\\]\\()[^\\s)]+/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'string': {\n\t\t\t\tpattern: /(^[ \\t]+)\"(?:\\\\.|[^\\\\\"])*\"(?=\\)$)/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'markup-bracket': markdown['markup-bracket']\n\t\t}\n\t}\n});\n\n['url', 'bold', 'italic', 'strike'].forEach(token => {\n\t['url', 'bold', 'italic', 'strike', 'code-snippet', 'markup-bracket'].forEach(inside => {\n\t\tif (token != inside) {\n\t\t\tmarkdown[token].inside.content.inside[inside] = markdown[inside];\n\t\t}\n\t});\n});\n"],"names":[],"mappings":"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"}