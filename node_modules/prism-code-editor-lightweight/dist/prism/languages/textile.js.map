{"version":3,"file":"textile.js","sources":["../../../src/prism/languages/textile.js"],"sourcesContent":["import { languages } from '../core.js';\nimport { clone, insertBefore } from '../utils/language.js';\nimport { re } from '../utils/shared.js';\nimport './markup.js';\n\nvar replacements = ['(?:\\\\([^|()\\n]+\\\\)|\\\\[[^\\\\]\\n]+\\\\]|\\\\{[^\\n}]+\\\\})', '(?:\\\\)|\\\\((?![^|()\\n]+\\\\)))'];\n\nvar modifierTokens = {\n\t'css': {\n\t\tpattern: /\\{[^{}]+\\}/,\n\t\tinside: 'css'\n\t},\n\t'class-id': {\n\t\tpattern: /(\\()[^()]+(?=\\))/,\n\t\tlookbehind: true,\n\t\talias: 'attr-value'\n\t},\n\t'lang': {\n\t\tpattern: /(\\[)[^[\\]]+(?=\\])/,\n\t\tlookbehind: true,\n\t\talias: 'attr-value'\n\t},\n\t// Anything else is punctuation (the first pattern is for row/col spans inside tables)\n\t'punctuation': /[\\\\/]\\d+|\\S/\n};\n\nvar phraseInlineInside = {\n\t// Note: superscripts and subscripts are not handled specifically\n\n\t// *bold*, **bold**\n\t'bold': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re(/(^(\\*\\*?)<0>*).+?(?=\\2)/.source, replacements),\n\t\tlookbehind: true\n\t},\n\n\t// _italic_, __italic__\n\t'italic': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re(/(^(__?)<0>*).+?(?=\\2)/.source, replacements),\n\t\tlookbehind: true\n\t},\n\n\t// ??cite??\n\t'cite': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re(/(^\\?\\?<0>*).+?(?=\\?\\?)/.source, replacements),\n\t\tlookbehind: true,\n\t\talias: 'string'\n\t},\n\n\t// @code@\n\t'code': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re('(^@<0>*).+?(?=@)', replacements),\n\t\tlookbehind: true,\n\t\talias: 'keyword'\n\t},\n\n\t// +inserted+\n\t'inserted': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re('(^\\\\+<0>*).+?(?=\\\\+)', replacements),\n\t\tlookbehind: true\n\t},\n\n\t// -deleted-\n\t'deleted': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re('(^-<0>*).+?(?=-)', replacements),\n\t\tlookbehind: true\n\t},\n\n\t// %span%\n\t'span': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re('(^%<0>*).+?(?=%)', replacements),\n\t\tlookbehind: true\n\t},\n\n\t'modifier': {\n\t\tpattern: re('(^\\\\*\\\\*|__|\\\\?\\\\?|[*_%@^~+-])<0>+', replacements),\n\t\tlookbehind: true,\n\t\tinside: modifierTokens\n\t},\n\t'punctuation': /[*_%?@^~+-]+/\n};\n\nvar phraseTableInside = {\n\t'modifier': {\n\t\t// Modifiers for rows after the first one are\n\t\t// preceded by a pipe and a line feed\n\t\tpattern: re(/(^|\\|\\n?)(?:<0>|<1>|[<>=^~_]|[\\\\/]\\d+)+(?=\\.)/.source, replacements),\n\t\tlookbehind: true,\n\t\tinside: modifierTokens\n\t},\n\t'punctuation': /\\||^\\./\n};\n\nvar phraseInside = {\n\n\t// h1. Header 1\n\t'block-tag': {\n\t\tpattern: re('^[a-z]\\\\w*(?:<0>|<1>|[<>=])*\\\\.', replacements),\n\t\tinside: {\n\t\t\t'modifier': {\n\t\t\t\tpattern: re('(^[a-z]\\\\w*)(?:<0>|<1>|[<>=])+(?=\\\\.)', replacements),\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: modifierTokens\n\t\t\t},\n\t\t\t'tag': /^[a-z]\\w*/,\n\t\t\t'punctuation': /\\.$/\n\t\t}\n\t},\n\n\t// # List item\n\t// * List item\n\t'list': {\n\t\tpattern: re('^[*#]+<0>*\\\\s+\\\\S.*', replacements, 'm'),\n\t\tinside: {\n\t\t\t'modifier': {\n\t\t\t\tpattern: re('(^[*#]+)<0>+', replacements),\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: modifierTokens\n\t\t\t},\n\t\t\t'punctuation': /^[*#]+/\n\t\t}\n\t},\n\n\t// | cell | cell | cell |\n\t'table': {\n\t\t// Modifiers can be applied to the row: {color:red}.|1|2|3|\n\t\t// or the cell: |{color:red}.1|2|3|\n\t\tpattern: re(/^(?:(?:<0>|<1>|[<>=^~])+\\.\\s*)?(?:\\|(?:(?:<0>|<1>|[<>=^~_]|[\\\\/]\\d+)+\\.|(?!(?:<0>|<1>|[<>=^~_]|[\\\\/]\\d+)+\\.))[^|]*)+\\|/.source, replacements, 'm'),\n\t\tinside: phraseTableInside\n\t},\n\n\t'inline': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re(/(^|[^a-zA-Z\\d])(\\*\\*|__|\\?\\?|[*_%@^~+-])<0>*.+?\\2(?![a-zA-Z\\d])/.source, replacements),\n\t\tlookbehind: true,\n\t\tinside: phraseInlineInside\n\t},\n\n\t// [alias]http://example.com\n\t'link-ref': {\n\t\tpattern: /^\\[[^\\]]+\\]\\S+$/m,\n\t\tinside: {\n\t\t\t'string': {\n\t\t\t\tpattern: /(^\\[)[^\\]]+(?=\\])/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'url': {\n\t\t\t\tpattern: /(^\\])\\S+$/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'punctuation': /[[\\]]/\n\t\t}\n\t},\n\n\t// \"text\":http://example.com\n\t// \"text\":link-ref\n\t'link': {\n\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\tpattern: re(/\"<0>*[^\"]+\":\\S+(?=\\S)[\\w/]?/.source, replacements),\n\t\tinside: {\n\t\t\t'text': {\n\t\t\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\t\t\tpattern: re(/(^\"<0>*)[^\"]+(?=\")/.source, replacements),\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'modifier': {\n\t\t\t\tpattern: re(/(^\")<0>+/.source, replacements),\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: modifierTokens\n\t\t\t},\n\t\t\t'url': {\n\t\t\t\tpattern: /(:).+/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'punctuation': /[\":]/\n\t\t}\n\t},\n\n\t// !image.jpg!\n\t// !image.jpg(Title)!:http://example.com\n\t'image': {\n\t\tpattern: re(/!(?:<0>|<1>|[<>=])*(?![<>=])[^!\\s()]+(?:\\([^)]+\\))?!(?::\\S+(?=\\S)[\\w/]?)?/.source, replacements),\n\t\tinside: {\n\t\t\t'source': {\n\t\t\t\tpattern: re(/(^!(?:<0>|<1>|[<>=])*)(?![<>=])[^!\\s()]+(?:\\([^)]+\\))?(?=!)/.source, replacements),\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'url'\n\t\t\t},\n\t\t\t'modifier': {\n\t\t\t\tpattern: re(/(^!)(?:<0>|<1>|[<>=])+/.source, replacements),\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: modifierTokens\n\t\t\t},\n\t\t\t'url': {\n\t\t\t\tpattern: /(:).+/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'punctuation': /[!:]/\n\t\t}\n\t},\n\n\t// Footnote[1]\n\t'footnote': {\n\t\tpattern: /\\b\\[\\d+\\]/,\n\t\talias: 'comment',\n\t\tinside: {\n\t\t\t'punctuation': /[[\\]]/\n\t\t}\n\t},\n\n\t// CSS(Cascading Style Sheet)\n\t'acronym': {\n\t\tpattern: /\\b[A-Z\\d]+\\([^)]+\\)/,\n\t\tinside: {\n\t\t\t'comment': {\n\t\t\t\tpattern: /(\\()[^()]+(?=\\))/,\n\t\t\t\tlookbehind: true\n\t\t\t},\n\t\t\t'punctuation': /[()]/\n\t\t}\n\t},\n\n\t// Prism(C)\n\t'mark': {\n\t\tpattern: /\\b\\((?:C|R|TM)\\)/,\n\t\talias: 'comment',\n\t\tinside: {\n\t\t\t'punctuation': /[()]/\n\t\t}\n\t}\n};\n\nvar textile = languages.textile = clone(languages.html);\n\n// Allow some nesting\nvar nestedPatterns = {};\n\ninsertBefore(textile, 'markup-bracket', {\n\t'phrase': {\n\t\tpattern: /(^|\\n)\\S[\\s\\S]*?(?=$|\\n\\n)/,\n\t\tlookbehind: true,\n\t\tinside: phraseInside\n\t}\n});\n\n['bold', 'italic', 'inserted', 'deleted', 'span'].forEach(p => phraseInlineInside[p].inside = nestedPatterns);\n\n// Allow some styles inside table cells\n['inline', 'link', 'image', 'footnote', 'acronym', 'mark'].forEach(p => nestedPatterns[p] = phraseTableInside[p] = phraseInside[p]);\n\n// Only allow alpha-numeric HTML tags, not XML tags\ntextile.tag.pattern = /<\\/?(?!\\d)[a-z\\d]+(?:\\s+[^\\s/=>]+(?:=(?:\"[^\"]*\"|'[^']'|[^\\s\"'>=]+))?)*\\s*\\/?>/gi;\n"],"names":[],"mappings":"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"}