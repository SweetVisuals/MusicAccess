{"version":3,"file":"icu-message-format.js","sources":["../../../src/prism/languages/icu-message-format.js"],"sourcesContent":["import { languages, rest } from '../core.js';\nimport { nested, replace } from '../utils/shared.js';\n\nvar stringPattern = /'[{}:=,](?:[^']|'')*'(?!')/g;\n\nvar escape = {\n\tpattern: /''/g,\n\tgreedy: true,\n\talias: 'operator'\n};\nvar string = {\n\tpattern: stringPattern,\n\tgreedy: true,\n\tinside: {\n\t\t'escape': escape\n\t}\n};\n\nvar message = {\n\tpattern: /(?!^)[\\s\\S]+(?=.)/\n};\n\nvar choiceStyleInside = {\n\t'punctuation': /\\|/,\n\t'range': {\n\t\tpattern: /^(\\s*)[+-]?(?:\\d+(?:\\.\\d*)?|∞)\\s*[<#≤]/,\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\t'operator': /[<#≤]/,\n\t\t\t'number': /\\S+/\n\t\t}\n\t}\n};\n\nvar argumentSource = nested(\n\treplace(/\\{(?:[^{}']|'(?![{},'])|''|<0>|<self>)*\\}/.source, [stringPattern.source]), 3\n);\n\nvar nestedMessage = {\n\tpattern: RegExp(argumentSource),\n\tinside: {\n\t\t'message': message,\n\t\t'message-delimiter': {\n\t\t\tpattern: /./,\n\t\t\talias: 'punctuation'\n\t\t}\n\t}\n};\n\nchoiceStyleInside[rest] = message.inside = languages['icu-message-format'] = {\n\t'argument': {\n\t\tpattern: RegExp(argumentSource, 'g'),\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'content': {\n\t\t\t\tpattern: /(?!^)[\\s\\S]+(?=.)/,\n\t\t\t\tinside: {\n\t\t\t\t\t'argument-name': {\n\t\t\t\t\t\tpattern: /^(\\s*)[^{}:=,\\s]+/,\n\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t},\n\t\t\t\t\t'choice-style': {\n\t\t\t\t\t\t// https://unicode-org.github.io/icu-docs/apidoc/released/icu4c/classicu_1_1ChoiceFormat.html#details\n\t\t\t\t\t\tpattern: /^(\\s*,\\s*choice\\s*,\\s*)\\S(?:[\\s\\S]*\\S)?/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tinside: choiceStyleInside\n\t\t\t\t\t},\n\t\t\t\t\t'plural-style': {\n\t\t\t\t\t\t// https://unicode-org.github.io/icu-docs/apidoc/released/icu4j/com/ibm/icu/text/PluralFormat.html#:~:text=Patterns%20and%20Their%20Interpretation\n\t\t\t\t\t\tpattern: /^(\\s*,\\s*(?:plural|selectordinal)\\s*,\\s*)\\S(?:[\\s\\S]*\\S)?/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'offset': /^offset:\\s*\\d+/,\n\t\t\t\t\t\t\t'nested-message': nestedMessage,\n\t\t\t\t\t\t\t'selector': {\n\t\t\t\t\t\t\t\tpattern: /=\\d+|[^{}:=,\\s]+/,\n\t\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t\t'keyword': /^(?:few|many|one|other|two|zero)$/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t'select-style': {\n\t\t\t\t\t\t// https://unicode-org.github.io/icu-docs/apidoc/released/icu4j/com/ibm/icu/text/SelectFormat.html#:~:text=Patterns%20and%20Their%20Interpretation\n\t\t\t\t\t\tpattern: /^(\\s*,\\s*select\\s*,\\s*)\\S(?:[\\s\\S]*\\S)?/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'nested-message': nestedMessage,\n\t\t\t\t\t\t\t'selector': {\n\t\t\t\t\t\t\t\tpattern: /[^{}:=,\\s]+/,\n\t\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t\t'keyword': /^other$/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t'keyword': /\\b(?:choice|plural|select|selectordinal)\\b/,\n\t\t\t\t\t'arg-type': {\n\t\t\t\t\t\tpattern: /\\b(?:date|duration|number|ordinal|spellout|time)\\b/,\n\t\t\t\t\t\talias: 'keyword'\n\t\t\t\t\t},\n\t\t\t\t\t'arg-skeleton': {\n\t\t\t\t\t\tpattern: /(,\\s*)::[^{}:=,\\s]+/,\n\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t},\n\t\t\t\t\t'arg-style': {\n\t\t\t\t\t\tpattern: /(,\\s*)(?:currency|full|integer|long|medium|percent|short)(?=\\s*$)/,\n\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t},\n\t\t\t\t\t'arg-style-text': {\n\t\t\t\t\t\tpattern: RegExp(/(^\\s*,\\s*(?!\\s))/.source + nested(/(?:[^{}']|'[^']*'|\\{(?:<self>)?\\})+/.source, 3) + '$'),\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'string'\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /,/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'argument-delimiter': {\n\t\t\t\tpattern: /./,\n\t\t\t\talias: 'operator'\n\t\t\t}\n\t\t}\n\t},\n\t'escape': escape,\n\t'string': string\n};\n"],"names":[],"mappings":";;AAGA,IAAI,gBAAgB;AAEpB,IAAI,SAAS;AAAA,EACZ,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,OAAO;AACR;AACA,IAAI,SAAS;AAAA,EACZ,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,QAAQ;AAAA,IACP,UAAU;AAAA,EACZ;AACA;AAEA,IAAI,UAAU;AAAA,EACb,SAAS;AACV;AAEA,IAAI,oBAAoB;AAAA,EACvB,eAAe;AAAA,EACf,SAAS;AAAA,IACR,SAAS;AAAA,IACT,YAAY;AAAA,IACZ,QAAQ;AAAA,MACP,YAAY;AAAA,MACZ,UAAU;AAAA,IACb;AAAA,EACA;AACA;AAEA,IAAI,iBAAiB;AAAA,EACpB,QAAQ,+CAAoD,CAAC,cAAc,MAAM,CAAC;AAAA,EAAG;AACtF;AAEA,IAAI,gBAAgB;AAAA,EACnB,SAAS,OAAO,cAAc;AAAA,EAC9B,QAAQ;AAAA,IACP,WAAW;AAAA,IACX,qBAAqB;AAAA,MACpB,SAAS;AAAA,MACT,OAAO;AAAA,IACV;AAAA,EACA;AACA;AAEA,kBAAkB,IAAI,IAAI,QAAQ,SAAS,UAAU,oBAAoB,IAAI;AAAA,EAC5E,YAAY;AAAA,IACX,SAAS,OAAO,gBAAgB,GAAG;AAAA,IACnC,QAAQ;AAAA,IACR,QAAQ;AAAA,MACP,WAAW;AAAA,QACV,SAAS;AAAA,QACT,QAAQ;AAAA,UACP,iBAAiB;AAAA,YAChB,SAAS;AAAA,YACT,YAAY;AAAA,UACZ;AAAA,UACD,gBAAgB;AAAA;AAAA,YAEf,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,QAAQ;AAAA,UACR;AAAA,UACD,gBAAgB;AAAA;AAAA,YAEf,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,QAAQ;AAAA,cACP,UAAU;AAAA,cACV,kBAAkB;AAAA,cAClB,YAAY;AAAA,gBACX,SAAS;AAAA,gBACT,QAAQ;AAAA,kBACP,WAAW;AAAA,gBACpB;AAAA,cACA;AAAA,YACA;AAAA,UACM;AAAA,UACD,gBAAgB;AAAA;AAAA,YAEf,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,QAAQ;AAAA,cACP,kBAAkB;AAAA,cAClB,YAAY;AAAA,gBACX,SAAS;AAAA,gBACT,QAAQ;AAAA,kBACP,WAAW;AAAA,gBACpB;AAAA,cACA;AAAA,YACA;AAAA,UACM;AAAA,UACD,WAAW;AAAA,UACX,YAAY;AAAA,YACX,SAAS;AAAA,YACT,OAAO;AAAA,UACP;AAAA,UACD,gBAAgB;AAAA,YACf,SAAS;AAAA,YACT,YAAY;AAAA,UACZ;AAAA,UACD,aAAa;AAAA,YACZ,SAAS;AAAA,YACT,YAAY;AAAA,UACZ;AAAA,UACD,kBAAkB;AAAA,YACjB,SAAS,OAAO,wBAA4B,OAAO,yCAA8C,CAAC,IAAI,GAAG;AAAA,YACzG,YAAY;AAAA,YACZ,OAAO;AAAA,UACP;AAAA,UACD,eAAe;AAAA,QACpB;AAAA,MACI;AAAA,MACD,sBAAsB;AAAA,QACrB,SAAS;AAAA,QACT,OAAO;AAAA,MACX;AAAA,IACA;AAAA,EACE;AAAA,EACD,UAAU;AAAA,EACV,UAAU;AACX;"}