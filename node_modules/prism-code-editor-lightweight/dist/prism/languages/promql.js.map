{"version":3,"file":"promql.js","sources":["../../../src/prism/languages/promql.js"],"sourcesContent":["import { languages } from '../core.js';\n\n// PromQL vector matching + the by and without clauses\n// (https://prometheus.io/docs/prometheus/latest/querying/operators/#vector-matching)\nvar vectorMatching = 'on|ignoring|group_right|group_left|by|without';\n\nlanguages.promql = {\n\t'comment': {\n\t\tpattern: /(^[ \\t]*)#.*/m,\n\t\tlookbehind: true\n\t},\n\t'vector-match': {\n\t\t// Match the comma-separated label lists inside vector matching:\n\t\tpattern: RegExp('((?:' + vectorMatching + ')\\\\s*)\\\\([^)]*\\\\)'),\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\t'label-key': {\n\t\t\t\tpattern: /\\b[^,]+\\b/,\n\t\t\t\talias: 'attr-name',\n\t\t\t},\n\t\t\t'punctuation': /[(),]/\n\t\t},\n\t},\n\t'context-labels': {\n\t\tpattern: /\\{[^{}]*\\}/,\n\t\tinside: {\n\t\t\t'label-key': {\n\t\t\t\tpattern: /\\b[a-z_]\\w*(?=\\s*(?:=|![=~]))/,\n\t\t\t\talias: 'attr-name',\n\t\t\t},\n\t\t\t'label-value': {\n\t\t\t\tpattern: /([\"'`])(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1/g,\n\t\t\t\tgreedy: true,\n\t\t\t\talias: 'attr-value',\n\t\t\t},\n\t\t\t'punctuation': /\\{|\\}|=~?|![=~]|,/,\n\t\t},\n\t},\n\t'context-range': [\n\t\t{\n\t\t\tpattern: /\\[[\\w\\s:]+\\]/, // [1m]\n\t\t\tinside: {\n\t\t\t\t'punctuation': /[[\\]:]/,\n\t\t\t\t'range-duration': {\n\t\t\t\t\tpattern: /\\b(?:\\d+(?:[smhdwy]|ms))+\\b/i,\n\t\t\t\t\talias: 'number',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tpattern: /(\\boffset\\s+)\\w+/, // offset 1m\n\t\t\tlookbehind: true,\n\t\t\tinside: {\n\t\t\t\t'range-duration': {\n\t\t\t\t\tpattern: /\\b(?:\\d+(?:[smhdwy]|ms))+\\b/i,\n\t\t\t\t\talias: 'number',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t],\n\t'keyword': RegExp('\\\\b(?:sum|min|max|avg|group|stddev|stdvar|count|count_values|bottomk|topk|quantile|' + vectorMatching + '|offset)\\\\b', 'i'),\n\t'function': /\\b[a-z_]\\w*(?=\\s*\\()/i,\n\t'number': /[+-]?(?:(?:\\b\\d+(?:\\.\\d+)?|\\B\\.\\d+)(?:e[+-]?\\d+)?\\b|\\b(?:0x[a-f\\d]+|nan|inf)\\b)/i,\n\t'operator': /[!=<>]=|[%^<>/*+-]|\\b(?:and|or|unless)\\b/i,\n\t'punctuation': /[()[\\]{}.,;`]/,\n};\n"],"names":[],"mappings":";AAIA,IAAI,iBAAiB;AAErB,UAAU,SAAS;AAAA,EAClB,WAAW;AAAA,IACV,SAAS;AAAA,IACT,YAAY;AAAA,EACZ;AAAA,EACD,gBAAgB;AAAA;AAAA,IAEf,SAAS,OAAO,SAAS,iBAAiB,mBAAmB;AAAA,IAC7D,YAAY;AAAA,IACZ,QAAQ;AAAA,MACP,aAAa;AAAA,QACZ,SAAS;AAAA,QACT,OAAO;AAAA,MACP;AAAA,MACD,eAAe;AAAA,IACf;AAAA,EACD;AAAA,EACD,kBAAkB;AAAA,IACjB,SAAS;AAAA,IACT,QAAQ;AAAA,MACP,aAAa;AAAA,QACZ,SAAS;AAAA,QACT,OAAO;AAAA,MACP;AAAA,MACD,eAAe;AAAA,QACd,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,OAAO;AAAA,MACP;AAAA,MACD,eAAe;AAAA,IACf;AAAA,EACD;AAAA,EACD,iBAAiB;AAAA,IAChB;AAAA,MACC,SAAS;AAAA;AAAA,MACT,QAAQ;AAAA,QACP,eAAe;AAAA,QACf,kBAAkB;AAAA,UACjB,SAAS;AAAA,UACT,OAAO;AAAA,QACP;AAAA,MACD;AAAA,IACD;AAAA,IACD;AAAA,MACC,SAAS;AAAA;AAAA,MACT,YAAY;AAAA,MACZ,QAAQ;AAAA,QACP,kBAAkB;AAAA,UACjB,SAAS;AAAA,UACT,OAAO;AAAA,QACP;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EACD,WAAW,OAAO,wFAAwF,iBAAiB,eAAe,GAAG;AAAA,EAC7I,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,eAAe;AAChB;"}